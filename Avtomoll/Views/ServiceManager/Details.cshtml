@model Avtomoll.ViewModel.Manager.ServiceHistoryViewModel

@{
    ViewData["Title"] = $"Заявка № {Model.id}";
}

<h1>Заявка от @Model.ClientName</h1>

    <div>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.id)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.id)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Status)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Status)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ClientName)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ClientName)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ClientPhone)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ClientPhone)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.CarBrand)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.CarBrand)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.TypeCar)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.TypeCar)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.ApproximatePriceService)
        </dt>
        @*<dd class = "col-sm-10">
            @Html.DisplayFor(model => model.ApproximatePriceService)
        </dd>*@
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.PriceService)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.PriceService)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.OrderTime)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.OrderTime)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.VisitTime)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.VisitTime)
        </dd>
    </dl>
</div>
<div>
    @if (Model.Services == null)
    {
                <p class="btn btn-primary">@Html.ActionLink("Добавить услугу", "AddServicesList", new { LeadId = Model.id}, new { @class = "btn btn-primary"})</p>
    }
    else
    {
    <table class="table">
        <thead>
         <tr>
            <th>Услуга</th>
            <th>Время выполнения</th>
            <th>Стоимость</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        @foreach (var service in Model.Services)
       {
           <tr>
                <td>
                        @Html.DisplayFor(model => service.Name)
                </td>
                <td>
                        @Html.DisplayFor(model => service.LeadTime)
                </td>
                <td>
                    @if(Model.TypeCar == "Отечественная"){
                        @Html.DisplayFor(model => service.NativeCar)
                    }
                    else{
                        @Html.DisplayFor(model => service.ForeignCar)
                    }
                </td>
                <td>
                     @Html.ActionLink("Отменить", "CancelService", new { ServiceId = service.ServiceId, LeadId = Model.id  }) 
                </td>
           </tr>
       }
       <tr>
           <td></td>
           <td>
               <p>
                    @Html.ActionLink("Добавить услугу", "AddServicesList", new { LeadId = Model.id}, new { @class = "btn btn-primary"})
               </p>
           </td>
           <td></td>
           <td></td>
       </tr>
       </tbody>
    </table>
    }
</div>
<p>
    @Html.ActionLink("Редактировать", "Edit", new { LeadId = Model.id }, new { @class = "btn btn-primary"})
</p>
       <p>
        <a class="btn btn-primary" asp-action="Index">Назад к заявкам</a>
       </p>


